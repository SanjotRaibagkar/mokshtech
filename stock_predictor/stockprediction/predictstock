import property
from property import *
from stockprediction import *
from technicalanalysis import *
from rnnmodel import ml_dpmodels


def create_report(path, header):
    f = open(path, "w+")
    f.write(reportcol)
    f.write('\n')
    f.close



def predictstock(symbol):
    b = ta(symbol)
    data = b.get_panel_data()
    skip_days = sorted([(sorted(v).pop()) for k, v in b.featuredict.items()]).pop()

    def funcseries(x):
        t = ml_dpmodels(int(x), symbol)
        d2 = dict((k, t.predict_forcast(v, skip_days)) for k, v in data.items())

    list(map(funcseries, b.predict_days))


create_report(reportpath,reportcol)
warnings.filterwarnings("ignore")
try:
    list(map(predictstock, indlist))
    #list(map(predictstock, nonindlist))

except Exception as e:
    print(e)
